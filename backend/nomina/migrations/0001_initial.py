# Generated by Django 5.2.1 on 2025-07-25 22:17

import django.db.models.deletion
import nomina.models
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('api', '0007_merge_20250717_2256'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='CierreNomina',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('periodo', models.CharField(max_length=7)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('estado', models.CharField(choices=[('pendiente', 'Pendiente'), ('cargando_archivos', 'Cargando Archivos'), ('archivos_completos', 'Archivos Completos'), ('verificacion_datos', 'Verificación de Datos'), ('verificado_sin_discrepancias', 'Verificado Sin Discrepancias'), ('datos_consolidados', 'Datos Consolidados'), ('con_discrepancias', 'Con Discrepancias'), ('con_incidencias', 'Con Incidencias'), ('incidencias_resueltas', 'Incidencias Resueltas'), ('requiere_recarga_archivos', 'Requiere Recarga de Archivos'), ('validacion_final', 'Validación Final'), ('finalizado', 'Finalizado')], default='pendiente', max_length=40)),
                ('estado_incidencias', models.CharField(choices=[('pendiente', 'Pendiente'), ('detectadas', 'Detectadas'), ('en_revision', 'En Revisión'), ('resueltas', 'Resueltas')], default='pendiente', max_length=30)),
                ('total_incidencias', models.PositiveIntegerField(default=0, help_text='Total de incidencias detectadas')),
                ('fecha_ultima_revision', models.DateTimeField(blank=True, null=True)),
                ('revisiones_realizadas', models.PositiveIntegerField(default=0)),
                ('observaciones_recarga', models.TextField(blank=True, help_text='Motivo para solicitar recarga de archivos', null=True)),
                ('fecha_solicitud_recarga', models.DateTimeField(blank=True, help_text='Fecha cuando se solicitó la recarga', null=True)),
                ('version_datos', models.PositiveIntegerField(default=1, help_text='Versión de los datos consolidados (incrementa con cada recarga)')),
                ('estado_consolidacion', models.CharField(choices=[('pendiente', 'Pendiente de Consolidar'), ('consolidando', 'Consolidando Información'), ('consolidado', 'Información Consolidada'), ('error_consolidacion', 'Error en Consolidación')], default='pendiente', max_length=30)),
                ('fecha_consolidacion', models.DateTimeField(blank=True, null=True)),
                ('puede_consolidar', models.BooleanField(default=False, help_text='¿Tiene 0 discrepancias y puede consolidarse?')),
                ('fecha_finalizacion', models.DateTimeField(blank=True, help_text='Fecha cuando se finalizó el cierre', null=True)),
                ('cliente', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='api.cliente')),
                ('supervisor_asignado', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cierres_supervisor', to=settings.AUTH_USER_MODEL)),
                ('usuario_analista', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cierres_analista', to=settings.AUTH_USER_MODEL)),
                ('usuario_finalizacion', models.ForeignKey(blank=True, help_text='Usuario que finalizó el cierre', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cierres_finalizados', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'unique_together': {('cliente', 'periodo')},
            },
        ),
        migrations.CreateModel(
            name='ChecklistItem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('descripcion', models.CharField(max_length=255)),
                ('estado', models.CharField(choices=[('pendiente', 'Pendiente'), ('completado', 'Completado'), ('no_realizado', 'No Realizado')], default='pendiente', max_length=20)),
                ('comentario', models.TextField(blank=True, null=True)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_modificacion', models.DateTimeField(auto_now=True)),
                ('cierre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='checklist', to='nomina.cierrenomina')),
            ],
        ),
        migrations.CreateModel(
            name='AnalisisDatosCierre',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('cantidad_empleados_actual', models.IntegerField(default=0)),
                ('cantidad_ingresos_actual', models.IntegerField(default=0)),
                ('cantidad_finiquitos_actual', models.IntegerField(default=0)),
                ('cantidad_ausentismos_actual', models.IntegerField(default=0)),
                ('cantidad_empleados_anterior', models.IntegerField(default=0)),
                ('cantidad_ingresos_anterior', models.IntegerField(default=0)),
                ('cantidad_finiquitos_anterior', models.IntegerField(default=0)),
                ('cantidad_ausentismos_anterior', models.IntegerField(default=0)),
                ('ausentismos_por_tipo_actual', models.JSONField(default=dict)),
                ('ausentismos_por_tipo_anterior', models.JSONField(default=dict)),
                ('tolerancia_variacion_salarial', models.DecimalField(decimal_places=2, default=30.0, max_digits=5)),
                ('estado', models.CharField(choices=[('pendiente', 'Pendiente'), ('procesando', 'Procesando'), ('completado', 'Completado'), ('error', 'Error')], default='pendiente', max_length=20)),
                ('fecha_analisis', models.DateTimeField(auto_now_add=True)),
                ('fecha_completado', models.DateTimeField(blank=True, null=True)),
                ('notas', models.TextField(blank=True)),
                ('analista', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('cierre', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='analisis_datos', to='nomina.cierrenomina')),
            ],
            options={
                'verbose_name': 'Análisis de Datos del Cierre',
                'verbose_name_plural': 'Análisis de Datos de Cierres',
                'ordering': ['-fecha_analisis'],
            },
        ),
        migrations.CreateModel(
            name='ConceptoRemuneracion',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre_concepto', models.CharField(max_length=120)),
                ('clasificacion', models.CharField(choices=[('haberes_imponibles', 'Haberes Imponibles'), ('haberes_no_imponibles', 'Haberes No Imponibles'), ('horas_extras', 'Horas Extras'), ('descuentos_legales', 'Descuentos Legales'), ('otros_descuentos', 'Otros Descuentos'), ('aportes_patronales', 'Aportes Patronales'), ('informacion_adicional', 'Información Adicional (No Monto)'), ('impuestos', 'Impuestos')], max_length=30)),
                ('hashtags', models.JSONField(blank=True, default=list)),
                ('vigente', models.BooleanField(default=True)),
                ('cliente', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='api.cliente')),
                ('usuario_clasifica', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='conceptos_clasificados', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'unique_together': {('cliente', 'nombre_concepto')},
            },
        ),
        migrations.CreateModel(
            name='ConceptoRemuneracionNovedades',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre_concepto_novedades', models.CharField(max_length=120)),
                ('activo', models.BooleanField(default=True)),
                ('fecha_mapeo', models.DateTimeField(auto_now_add=True)),
                ('cliente', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='api.cliente')),
                ('concepto_libro', models.ForeignKey(blank=True, help_text='Concepto del libro de remuneraciones al que mapea este header de novedades', null=True, on_delete=django.db.models.deletion.CASCADE, to='nomina.conceptoremuneracion')),
                ('usuario_mapea', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='mapeos_novedades_creados', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'unique_together': {('cliente', 'nombre_concepto_novedades')},
            },
        ),
        migrations.CreateModel(
            name='EmpleadoCierre',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('rut', models.CharField(max_length=12)),
                ('nombre', models.CharField(max_length=120)),
                ('apellido_paterno', models.CharField(max_length=120)),
                ('apellido_materno', models.CharField(blank=True, max_length=120)),
                ('rut_empresa', models.CharField(max_length=20)),
                ('dias_trabajados', models.IntegerField(blank=True, null=True)),
                ('cierre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='empleados', to='nomina.cierrenomina')),
            ],
            options={
                'unique_together': {('cierre', 'rut')},
            },
        ),
        migrations.CreateModel(
            name='EmpleadoCierreNovedades',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('rut', models.CharField(max_length=12)),
                ('nombre', models.CharField(max_length=120)),
                ('apellido_paterno', models.CharField(max_length=120)),
                ('apellido_materno', models.CharField(blank=True, max_length=120)),
                ('cierre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='empleados_novedades', to='nomina.cierrenomina')),
            ],
            options={
                'unique_together': {('cierre', 'rut')},
            },
        ),
        migrations.CreateModel(
            name='IncidenciaCierre',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo_incidencia', models.CharField(choices=[('variacion_concepto', 'Variación de Concepto (>30%)'), ('concepto_nuevo', 'Concepto Nuevo'), ('concepto_perdido', 'Concepto Perdido'), ('empleado_deberia_ingresar', 'Empleado que Debería Ingresar'), ('empleado_no_deberia_estar', 'Empleado que No Debería Estar'), ('ausentismo_continuo', 'Ausentismo Continuo')], max_length=50)),
                ('rut_empleado', models.CharField(max_length=20)),
                ('descripcion', models.TextField()),
                ('valor_libro', models.CharField(blank=True, max_length=500, null=True)),
                ('valor_novedades', models.CharField(blank=True, max_length=500, null=True)),
                ('valor_movimientos', models.CharField(blank=True, max_length=500, null=True)),
                ('valor_analista', models.CharField(blank=True, max_length=500, null=True)),
                ('concepto_afectado', models.CharField(blank=True, max_length=200, null=True)),
                ('fecha_detectada', models.DateTimeField(auto_now_add=True)),
                ('estado', models.CharField(choices=[('pendiente', 'Pendiente de Resolución'), ('resuelta_analista', 'Resuelta por Analista'), ('aprobada_supervisor', 'Aprobada por Supervisor'), ('rechazada_supervisor', 'Rechazada por Supervisor'), ('re_resuelta', 'Re-resuelta por Analista')], default='pendiente', max_length=20)),
                ('prioridad', models.CharField(choices=[('baja', 'Baja'), ('media', 'Media'), ('alta', 'Alta'), ('critica', 'Crítica')], default='media', max_length=10)),
                ('impacto_monetario', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('fecha_primera_resolucion', models.DateTimeField(blank=True, null=True)),
                ('fecha_ultima_accion', models.DateTimeField(auto_now=True)),
                ('asignado_a', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='incidencias_asignadas', to=settings.AUTH_USER_MODEL)),
                ('cierre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='incidencias', to='nomina.cierrenomina')),
                ('empleado_libro', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='nomina.empleadocierre')),
                ('empleado_novedades', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='nomina.empleadocierrenovedades')),
            ],
        ),
        migrations.CreateModel(
            name='IncidenciaVariacionSalarial',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('rut_empleado', models.CharField(max_length=12)),
                ('nombre_empleado', models.CharField(max_length=200)),
                ('sueldo_base_actual', models.DecimalField(decimal_places=2, max_digits=15)),
                ('sueldo_base_anterior', models.DecimalField(decimal_places=2, max_digits=15)),
                ('porcentaje_variacion', models.DecimalField(decimal_places=2, max_digits=5)),
                ('tipo_variacion', models.CharField(choices=[('aumento', 'Aumento'), ('disminucion', 'Disminución')], max_length=20)),
                ('estado', models.CharField(choices=[('pendiente', 'Pendiente'), ('en_analisis', 'En Análisis'), ('justificado', 'Justificado'), ('aprobado', 'Aprobado'), ('rechazado', 'Rechazado')], default='pendiente', max_length=20)),
                ('justificacion_analista', models.TextField(blank=True)),
                ('fecha_justificacion', models.DateTimeField(blank=True, null=True)),
                ('comentario_supervisor', models.TextField(blank=True)),
                ('fecha_resolucion_supervisor', models.DateTimeField(blank=True, null=True)),
                ('fecha_deteccion', models.DateTimeField(auto_now_add=True)),
                ('fecha_ultima_accion', models.DateTimeField(auto_now=True)),
                ('analisis', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='incidencias_variacion', to='nomina.analisisdatoscierre')),
                ('analista_asignado', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='incidencias_variacion_asignadas', to=settings.AUTH_USER_MODEL)),
                ('cierre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='nomina.cierrenomina')),
                ('supervisor_revisor', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='incidencias_variacion_supervisadas', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Incidencia de Variación Salarial',
                'verbose_name_plural': 'Incidencias de Variación Salarial',
                'ordering': ['-fecha_deteccion'],
            },
        ),
        migrations.CreateModel(
            name='MovimientoAltaBaja',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombres_apellidos', models.CharField(max_length=200)),
                ('rut', models.CharField(max_length=12)),
                ('empresa_nombre', models.CharField(max_length=120)),
                ('cargo', models.CharField(max_length=120)),
                ('centro_de_costo', models.CharField(max_length=120)),
                ('sucursal', models.CharField(max_length=120)),
                ('fecha_ingreso', models.DateField()),
                ('fecha_retiro', models.DateField(blank=True, null=True)),
                ('tipo_contrato', models.CharField(max_length=80)),
                ('dias_trabajados', models.IntegerField()),
                ('sueldo_base', models.DecimalField(decimal_places=2, max_digits=12)),
                ('alta_o_baja', models.CharField(max_length=20)),
                ('motivo', models.CharField(blank=True, max_length=200)),
                ('cierre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='nomina.cierrenomina')),
                ('empleado', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='nomina.empleadocierre')),
            ],
        ),
        migrations.CreateModel(
            name='MovimientoAusentismo',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombres_apellidos', models.CharField(max_length=200)),
                ('rut', models.CharField(max_length=12)),
                ('empresa_nombre', models.CharField(max_length=120)),
                ('cargo', models.CharField(max_length=120)),
                ('centro_de_costo', models.CharField(max_length=120)),
                ('sucursal', models.CharField(max_length=120)),
                ('fecha_inicio_ausencia', models.DateField()),
                ('fecha_fin_ausencia', models.DateField()),
                ('dias', models.IntegerField()),
                ('tipo', models.CharField(max_length=80)),
                ('motivo', models.CharField(blank=True, max_length=200)),
                ('observaciones', models.TextField(blank=True)),
                ('cierre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='nomina.cierrenomina')),
                ('empleado', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='nomina.empleadocierre')),
            ],
        ),
        migrations.CreateModel(
            name='MovimientoVacaciones',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombres_apellidos', models.CharField(max_length=200)),
                ('rut', models.CharField(max_length=12)),
                ('empresa_nombre', models.CharField(max_length=120)),
                ('cargo', models.CharField(max_length=120)),
                ('centro_de_costo', models.CharField(max_length=120)),
                ('sucursal', models.CharField(max_length=120)),
                ('fecha_ingreso', models.DateField(blank=True, null=True)),
                ('fecha_inicio', models.DateField()),
                ('fecha_fin_vacaciones', models.DateField()),
                ('fecha_retorno', models.DateField()),
                ('cantidad_dias', models.IntegerField()),
                ('cierre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='nomina.cierrenomina')),
                ('empleado', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='nomina.empleadocierre')),
            ],
        ),
        migrations.CreateModel(
            name='MovimientoVariacionContrato',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombres_apellidos', models.CharField(max_length=200)),
                ('rut', models.CharField(max_length=12)),
                ('empresa_nombre', models.CharField(max_length=120)),
                ('cargo', models.CharField(max_length=120)),
                ('centro_de_costo', models.CharField(max_length=120)),
                ('sucursal', models.CharField(max_length=120)),
                ('fecha_ingreso', models.DateField(blank=True, null=True)),
                ('tipo_contrato_anterior', models.CharField(max_length=80)),
                ('tipo_contrato_actual', models.CharField(max_length=80)),
                ('cierre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='nomina.cierrenomina')),
                ('empleado', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='nomina.empleadocierre')),
            ],
        ),
        migrations.CreateModel(
            name='MovimientoVariacionSueldo',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombres_apellidos', models.CharField(max_length=200)),
                ('rut', models.CharField(max_length=12)),
                ('empresa_nombre', models.CharField(max_length=120)),
                ('cargo', models.CharField(max_length=120)),
                ('centro_de_costo', models.CharField(max_length=120)),
                ('sucursal', models.CharField(max_length=120)),
                ('fecha_ingreso', models.DateField(blank=True, null=True)),
                ('tipo_contrato', models.CharField(max_length=80)),
                ('sueldo_base_anterior', models.DecimalField(decimal_places=2, max_digits=12)),
                ('sueldo_base_actual', models.DecimalField(decimal_places=2, max_digits=12)),
                ('porcentaje_reajuste', models.DecimalField(decimal_places=2, max_digits=5)),
                ('variacion_pesos', models.DecimalField(decimal_places=2, max_digits=12)),
                ('cierre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='nomina.cierrenomina')),
                ('empleado', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='nomina.empleadocierre')),
            ],
        ),
        migrations.CreateModel(
            name='NominaConsolidada',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('rut_empleado', models.CharField(db_index=True, max_length=20)),
                ('nombre_empleado', models.CharField(max_length=200)),
                ('cargo', models.CharField(blank=True, max_length=200, null=True)),
                ('centro_costo', models.CharField(blank=True, max_length=200, null=True)),
                ('estado_empleado', models.CharField(choices=[('activo', 'Empleado Activo'), ('nueva_incorporacion', 'Nueva Incorporación'), ('finiquito', 'Finiquito'), ('ausente_total', 'Ausente Periodo Completo'), ('ausente_parcial', 'Ausente Parcial')], default='activo', max_length=20)),
                ('total_haberes', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('total_descuentos', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('liquido_pagar', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('dias_trabajados', models.IntegerField(blank=True, null=True)),
                ('dias_ausencia', models.IntegerField(default=0)),
                ('fecha_consolidacion', models.DateTimeField(auto_now_add=True)),
                ('fuente_datos', models.JSONField(default=dict, help_text='Fuentes de datos usadas para consolidar')),
                ('cierre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='nomina_consolidada', to='nomina.cierrenomina')),
            ],
            options={
                'verbose_name': 'Nómina Consolidada',
                'verbose_name_plural': 'Nóminas Consolidadas',
                'ordering': ['nombre_empleado'],
            },
        ),
        migrations.CreateModel(
            name='MovimientoPersonal',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo_movimiento', models.CharField(choices=[('ingreso', 'Nueva Incorporación'), ('finiquito', 'Finiquito'), ('ausentismo', 'Ausencia Periodo'), ('reincorporacion', 'Reincorporación después de Ausencia'), ('cambio_datos', 'Cambio de Datos Personales')], max_length=20)),
                ('motivo', models.CharField(blank=True, max_length=300, null=True)),
                ('dias_ausencia', models.IntegerField(blank=True, help_text='Días de ausencia si aplica', null=True)),
                ('fecha_movimiento', models.DateField(blank=True, null=True)),
                ('observaciones', models.TextField(blank=True, null=True)),
                ('fecha_deteccion', models.DateTimeField(auto_now_add=True)),
                ('detectado_por_sistema', models.CharField(default='consolidacion_automatica', max_length=100)),
                ('nomina_consolidada', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='movimientos', to='nomina.nominaconsolidada')),
            ],
            options={
                'verbose_name': 'Movimiento de Personal',
                'verbose_name_plural': 'Movimientos de Personal',
                'ordering': ['-fecha_deteccion'],
            },
        ),
        migrations.CreateModel(
            name='HeaderValorEmpleado',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre_header', models.CharField(db_index=True, max_length=200)),
                ('valor_original', models.CharField(help_text='Valor tal como viene del Excel', max_length=500)),
                ('valor_numerico', models.DecimalField(blank=True, decimal_places=4, max_digits=15, null=True)),
                ('es_numerico', models.BooleanField(default=False)),
                ('columna_excel', models.CharField(blank=True, help_text="Ej: 'D', 'AE'", max_length=10, null=True)),
                ('fila_excel', models.IntegerField(blank=True, null=True)),
                ('fuente_archivo', models.CharField(default='libro_remuneraciones', max_length=50)),
                ('fecha_consolidacion', models.DateTimeField(auto_now_add=True)),
                ('concepto_remuneracion', models.ForeignKey(blank=True, help_text='Clasificación del header si está disponible', null=True, on_delete=django.db.models.deletion.SET_NULL, to='nomina.conceptoremuneracion')),
                ('nomina_consolidada', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='header_valores', to='nomina.nominaconsolidada')),
            ],
            options={
                'verbose_name': 'Header-Valor por Empleado',
                'verbose_name_plural': 'Headers-Valores por Empleado',
                'ordering': ['nombre_header'],
            },
        ),
        migrations.CreateModel(
            name='ConceptoConsolidado',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('codigo_concepto', models.CharField(blank=True, db_index=True, max_length=20, null=True)),
                ('nombre_concepto', models.CharField(max_length=200)),
                ('tipo_concepto', models.CharField(blank=True, choices=[('haber_imponible', 'Haber Imponible'), ('haber_no_imponible', 'Haber No Imponible'), ('descuento_legal', 'Descuento Legal'), ('otro_descuento', 'Otro Descuento'), ('aporte_patronal', 'Aporte Patronal'), ('informativo', 'Solo Informativo')], max_length=20, null=True)),
                ('monto_total', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('cantidad', models.DecimalField(decimal_places=4, default=1, help_text='Cantidad/Horas si aplica', max_digits=10)),
                ('es_numerico', models.BooleanField(default=True, help_text='Si el concepto tiene valor numérico')),
                ('fuente_archivo', models.CharField(default='consolidacion', help_text='libro/movimientos/novedades/analista', max_length=50)),
                ('fecha_consolidacion', models.DateTimeField(auto_now_add=True)),
                ('nomina_consolidada', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='conceptos', to='nomina.nominaconsolidada')),
            ],
            options={
                'verbose_name': 'Concepto Consolidado',
                'verbose_name_plural': 'Conceptos Consolidados',
                'ordering': ['-monto_total', 'nombre_concepto'],
            },
        ),
        migrations.CreateModel(
            name='RegistroConceptoEmpleado',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre_concepto_original', models.CharField(max_length=200)),
                ('monto', models.CharField(blank=True, max_length=255, null=True)),
                ('fecha_registro', models.DateTimeField(auto_now_add=True)),
                ('concepto', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='nomina.conceptoremuneracion')),
                ('empleado', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='nomina.empleadocierre')),
            ],
        ),
        migrations.CreateModel(
            name='RegistroConceptoEmpleadoNovedades',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre_concepto_original', models.CharField(max_length=200)),
                ('monto', models.CharField(blank=True, max_length=255, null=True)),
                ('fecha_registro', models.DateTimeField(auto_now_add=True)),
                ('concepto', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='nomina.conceptoremuneracionnovedades')),
                ('empleado', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='nomina.empleadocierrenovedades')),
            ],
        ),
        migrations.CreateModel(
            name='ResolucionIncidencia',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo_resolucion', models.CharField(choices=[('justificacion', 'Justificación del Analista'), ('consulta', 'Consulta del Supervisor'), ('rechazo', 'Rechazo del Supervisor'), ('aprobacion', 'Aprobación del Supervisor')], max_length=30)),
                ('comentario', models.TextField()),
                ('adjunto', models.FileField(blank=True, null=True, upload_to=nomina.models.resolucion_upload_to)),
                ('fecha_resolucion', models.DateTimeField(auto_now_add=True)),
                ('incidencia', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='resoluciones', to='nomina.incidenciacierre')),
                ('usuario', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-fecha_resolucion'],
            },
        ),
        migrations.CreateModel(
            name='UploadLogNomina',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo_upload', models.CharField(choices=[('libro_remuneraciones', 'Libro de Remuneraciones'), ('movimientos_mes', 'Movimientos del Mes'), ('novedades', 'Novedades'), ('movimientos_ingresos', 'Movimientos - Ingresos'), ('movimientos_finiquitos', 'Movimientos - Finiquitos'), ('movimientos_incidencias', 'Movimientos - Incidencias'), ('archivos_analista', 'Archivos del Analista')], max_length=30)),
                ('fecha_subida', models.DateTimeField(auto_now_add=True)),
                ('nombre_archivo_original', models.CharField(max_length=255)),
                ('ruta_archivo', models.CharField(blank=True, help_text='Ruta relativa del archivo en storage', max_length=500)),
                ('tamaño_archivo', models.BigIntegerField(help_text='Tamaño en bytes')),
                ('hash_archivo', models.CharField(blank=True, help_text='SHA-256 del archivo', max_length=64)),
                ('estado', models.CharField(choices=[('subido', 'Archivo subido'), ('procesando', 'Procesando'), ('analizando_hdrs', 'Analizando Headers'), ('hdrs_analizados', 'Headers Analizados'), ('clasif_en_proceso', 'Clasificación en Proceso'), ('clasif_pendiente', 'Clasificación Pendiente'), ('clasificado', 'Clasificado'), ('completado', 'Procesado correctamente'), ('procesado', 'Procesado'), ('error', 'Con errores'), ('con_errores_parciales', 'Con Errores Parciales'), ('datos_eliminados', 'Datos procesados eliminados')], default='subido', max_length=30)),
                ('errores', models.TextField(blank=True)),
                ('resumen', models.JSONField(blank=True, null=True)),
                ('tiempo_procesamiento', models.DurationField(blank=True, null=True)),
                ('ip_usuario', models.GenericIPAddressField(blank=True, null=True)),
                ('registros_procesados', models.PositiveIntegerField(default=0)),
                ('registros_exitosos', models.PositiveIntegerField(default=0)),
                ('registros_fallidos', models.PositiveIntegerField(default=0)),
                ('headers_detectados', models.JSONField(blank=True, default=list)),
                ('iteracion', models.PositiveIntegerField(default=1, help_text='Número de iteración de procesamiento para este cierre (1=inicial, 2+=reproceso)')),
                ('es_iteracion_principal', models.BooleanField(default=True, help_text='Marca si es la iteración principal visible al usuario')),
                ('cierre', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='nomina.cierrenomina')),
                ('cliente', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='api.cliente')),
                ('usuario', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Log de Upload Nómina',
                'verbose_name_plural': 'Logs de Uploads Nómina',
                'ordering': ['-fecha_subida'],
            },
        ),
        migrations.CreateModel(
            name='TarjetaActivityLogNomina',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tarjeta', models.CharField(choices=[('libro_remuneraciones', 'Tarjeta: Libro de Remuneraciones'), ('movimientos_mes', 'Tarjeta: Movimientos del Mes'), ('novedades', 'Tarjeta: Novedades'), ('archivos_analista', 'Tarjeta: Archivos del Analista'), ('incidencias', 'Tarjeta: Incidencias'), ('revision', 'Tarjeta: Revisión')], max_length=25)),
                ('accion', models.CharField(choices=[('upload_excel', 'Subida de Excel'), ('manual_create', 'Creación Manual'), ('manual_edit', 'Edición Manual'), ('manual_delete', 'Eliminación Manual'), ('bulk_delete', 'Eliminación Masiva'), ('view_data', 'Visualización de Datos'), ('view_list', 'Visualización de Lista'), ('validation_error', 'Error de Validación'), ('process_start', 'Inicio de Procesamiento'), ('process_complete', 'Procesamiento Completado'), ('header_analysis', 'Análisis de Headers'), ('classification_start', 'Inicio de Clasificación'), ('classification_complete', 'Clasificación Completada'), ('reprocesar', 'Reprocesamiento'), ('delete_all', 'Eliminación Total'), ('delete_archivo', 'Eliminación de Archivo'), ('modal_open', 'Apertura de Modal'), ('modal_close', 'Cierre de Modal'), ('view_classification', 'Ver Clasificación'), ('save_classification', 'Guardar Clasificación'), ('download_template', 'Descarga de Plantilla'), ('file_select', 'Selección de Archivo'), ('file_validate', 'Validación de Archivo'), ('state_change', 'Cambio de Estado'), ('polling_start', 'Inicio de Polling'), ('polling_stop', 'Detención de Polling'), ('concept_map', 'Mapeo de Concepto'), ('concept_unmap', 'Desmapeo de Concepto'), ('auto_classify', 'Clasificación Automática'), ('manual_classify', 'Clasificación Manual'), ('headers_detected', 'Headers Detectados'), ('progress_update', 'Actualización de Progreso'), ('error_recovery', 'Recuperación de Error'), ('session_start', 'Inicio de Sesión de Trabajo'), ('session_end', 'Fin de Sesión de Trabajo')], max_length=25)),
                ('descripcion', models.TextField()),
                ('detalles', models.JSONField(blank=True, null=True)),
                ('resultado', models.CharField(choices=[('exito', 'Exitoso'), ('error', 'Error'), ('warning', 'Advertencia')], default='exito', max_length=10)),
                ('timestamp', models.DateTimeField(auto_now_add=True)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('cierre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='activity_logs_nomina', to='nomina.cierrenomina')),
                ('usuario', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('upload_log', models.ForeignKey(blank=True, help_text='Referencia al log del upload relacionado', null=True, on_delete=django.db.models.deletion.SET_NULL, to='nomina.uploadlognomina')),
            ],
            options={
                'verbose_name': 'Log de Actividad de Tarjeta Nómina',
                'verbose_name_plural': 'Logs de Actividad de Tarjetas Nómina',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='MovimientosMesUpload',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('archivo', models.FileField(upload_to=nomina.models.movimientos_mes_upload_to)),
                ('fecha_subida', models.DateTimeField(auto_now_add=True)),
                ('estado', models.CharField(choices=[('pendiente', 'Pendiente'), ('en_proceso', 'En Proceso'), ('procesado', 'Procesado'), ('con_error', 'Con Error'), ('con_errores_parciales', 'Con Errores Parciales')], default='pendiente', max_length=30)),
                ('resultados_procesamiento', models.JSONField(blank=True, default=dict)),
                ('cierre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='movimientos_mes', to='nomina.cierrenomina')),
                ('upload_log', models.ForeignKey(blank=True, help_text='Referencia al log del upload que generó este archivo', null=True, on_delete=django.db.models.deletion.SET_NULL, to='nomina.uploadlognomina')),
            ],
        ),
        migrations.CreateModel(
            name='LibroRemuneracionesUpload',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('archivo', models.FileField(upload_to=nomina.models.libro_remuneraciones_upload_to)),
                ('fecha_subida', models.DateTimeField(auto_now_add=True)),
                ('estado', models.CharField(choices=[('pendiente', 'Pendiente'), ('analizando_hdrs', 'Analizando Headers'), ('hdrs_analizados', 'Headers Analizados'), ('clasif_en_proceso', 'Clasificación en Proceso'), ('clasif_pendiente', 'Clasificación Pendiente'), ('clasificado', 'Clasificado'), ('con_error', 'Con Error')], default='pendiente', max_length=60)),
                ('header_json', models.JSONField(default=list)),
                ('cierre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='libros_remuneraciones', to='nomina.cierrenomina')),
                ('upload_log', models.ForeignKey(blank=True, help_text='Referencia al log del upload que generó este archivo', null=True, on_delete=django.db.models.deletion.SET_NULL, to='nomina.uploadlognomina')),
            ],
        ),
        migrations.CreateModel(
            name='ArchivoNovedadesUpload',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('archivo', models.FileField(upload_to=nomina.models.novedades_upload_to)),
                ('fecha_subida', models.DateTimeField(auto_now_add=True)),
                ('estado', models.CharField(choices=[('pendiente', 'Pendiente'), ('analizando_hdrs', 'Analizando Headers'), ('hdrs_analizados', 'Headers Analizados'), ('clasif_en_proceso', 'Clasificación en Proceso'), ('clasif_pendiente', 'Clasificación Pendiente'), ('clasificado', 'Clasificado'), ('procesado', 'Procesado'), ('con_error', 'Con Error')], default='pendiente', max_length=60)),
                ('header_json', models.JSONField(default=list)),
                ('analista', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('cierre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='archivos_novedades', to='nomina.cierrenomina')),
                ('upload_log', models.ForeignKey(blank=True, help_text='Referencia al log del upload que generó este archivo', null=True, on_delete=django.db.models.deletion.SET_NULL, to='nomina.uploadlognomina')),
            ],
        ),
        migrations.CreateModel(
            name='ArchivoAnalistaUpload',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo_archivo', models.CharField(choices=[('ingresos', 'Ingresos'), ('finiquitos', 'Finiquitos'), ('incidencias', 'Incidencias')], max_length=20)),
                ('archivo', models.FileField(upload_to=nomina.models.analista_upload_to)),
                ('fecha_subida', models.DateTimeField(auto_now_add=True)),
                ('estado', models.CharField(choices=[('pendiente', 'Pendiente'), ('en_proceso', 'En Proceso'), ('procesado', 'Procesado'), ('con_error', 'Con Error')], default='pendiente', max_length=20)),
                ('analista', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('cierre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='archivos_analista', to='nomina.cierrenomina')),
                ('upload_log', models.ForeignKey(blank=True, help_text='Referencia al log del upload que generó este archivo', null=True, on_delete=django.db.models.deletion.SET_NULL, to='nomina.uploadlognomina')),
            ],
        ),
        migrations.CreateModel(
            name='AnalistaIngreso',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('rut', models.CharField(max_length=12)),
                ('nombre', models.CharField(max_length=200)),
                ('fecha_ingreso', models.DateField()),
                ('archivo_origen', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='nomina.archivoanalistaupload')),
                ('cierre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='nomina.cierrenomina')),
                ('empleado', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='nomina.empleadocierre')),
            ],
            options={
                'indexes': [models.Index(fields=['cierre', 'rut'], name='nomina_anal_cierre__6ec0a8_idx')],
            },
        ),
        migrations.CreateModel(
            name='AnalistaIncidencia',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('rut', models.CharField(max_length=12)),
                ('nombre', models.CharField(max_length=200)),
                ('fecha_inicio_ausencia', models.DateField()),
                ('fecha_fin_ausencia', models.DateField()),
                ('dias', models.IntegerField()),
                ('tipo_ausentismo', models.CharField(max_length=80)),
                ('archivo_origen', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='nomina.archivoanalistaupload')),
                ('cierre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='nomina.cierrenomina')),
                ('empleado', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='nomina.empleadocierre')),
            ],
            options={
                'indexes': [models.Index(fields=['cierre', 'rut'], name='nomina_anal_cierre__a1040c_idx')],
            },
        ),
        migrations.CreateModel(
            name='AnalistaFiniquito',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('rut', models.CharField(max_length=12)),
                ('nombre', models.CharField(max_length=200)),
                ('fecha_retiro', models.DateField()),
                ('motivo', models.CharField(max_length=200)),
                ('archivo_origen', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='nomina.archivoanalistaupload')),
                ('cierre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='nomina.cierrenomina')),
                ('empleado', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='nomina.empleadocierre')),
            ],
            options={
                'indexes': [models.Index(fields=['cierre', 'rut'], name='nomina_anal_cierre__c460cc_idx')],
            },
        ),
        migrations.CreateModel(
            name='DiscrepanciaCierre',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo_discrepancia', models.CharField(choices=[('empleado_solo_libro', 'Empleado solo en Libro'), ('empleado_solo_novedades', 'Empleado solo en Novedades'), ('diff_datos_personales', 'Diferencia en Datos Personales'), ('diff_sueldo_base', 'Diferencia en Sueldo Base'), ('diff_concepto_monto', 'Diferencia en Monto por Concepto'), ('concepto_solo_libro', 'Concepto solo en Libro'), ('concepto_solo_novedades', 'Concepto solo en Novedades'), ('ingreso_no_reportado', 'Ingreso no reportado por Analista'), ('finiquito_no_reportado', 'Finiquito no reportado por Analista'), ('ausencia_no_reportada', 'Ausencia no reportada por Analista'), ('diff_fechas_ausencia', 'Diferencia en Fechas de Ausencia'), ('diff_dias_ausencia', 'Diferencia en Días de Ausencia'), ('diff_tipo_ausencia', 'Diferencia en Tipo de Ausencia')], max_length=50)),
                ('rut_empleado', models.CharField(max_length=20)),
                ('descripcion', models.TextField()),
                ('valor_libro', models.CharField(blank=True, max_length=500, null=True)),
                ('valor_novedades', models.CharField(blank=True, max_length=500, null=True)),
                ('valor_movimientos', models.CharField(blank=True, max_length=500, null=True)),
                ('valor_analista', models.CharField(blank=True, max_length=500, null=True)),
                ('concepto_afectado', models.CharField(blank=True, max_length=200, null=True)),
                ('fecha_detectada', models.DateTimeField(auto_now_add=True)),
                ('cierre', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='discrepancias', to='nomina.cierrenomina')),
                ('empleado_libro', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='nomina.empleadocierre')),
                ('empleado_novedades', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='nomina.empleadocierrenovedades')),
            ],
            options={
                'verbose_name': 'Discrepancia de Verificación',
                'verbose_name_plural': 'Discrepancias de Verificación',
                'ordering': ['-fecha_detectada'],
                'indexes': [models.Index(fields=['cierre', 'tipo_discrepancia'], name='nomina_disc_cierre__f82337_idx'), models.Index(fields=['rut_empleado', 'cierre'], name='nomina_disc_rut_emp_1e2dc4_idx'), models.Index(fields=['fecha_detectada'], name='nomina_disc_fecha_d_9f5f91_idx')],
            },
        ),
        migrations.AddIndex(
            model_name='incidenciacierre',
            index=models.Index(fields=['cierre', 'tipo_incidencia'], name='nomina_inci_cierre__d2088d_idx'),
        ),
        migrations.AddIndex(
            model_name='incidenciacierre',
            index=models.Index(fields=['cierre', 'estado'], name='nomina_inci_cierre__93d1fa_idx'),
        ),
        migrations.AddIndex(
            model_name='incidenciacierre',
            index=models.Index(fields=['rut_empleado', 'cierre'], name='nomina_inci_rut_emp_d5e509_idx'),
        ),
        migrations.AddIndex(
            model_name='incidenciacierre',
            index=models.Index(fields=['estado', 'prioridad'], name='nomina_inci_estado_d5a625_idx'),
        ),
        migrations.AddIndex(
            model_name='incidenciacierre',
            index=models.Index(fields=['asignado_a', 'estado'], name='nomina_inci_asignad_8518e6_idx'),
        ),
        migrations.AddIndex(
            model_name='incidenciavariacionsalarial',
            index=models.Index(fields=['cierre', 'estado'], name='nomina_inci_cierre__fc7c6b_idx'),
        ),
        migrations.AddIndex(
            model_name='incidenciavariacionsalarial',
            index=models.Index(fields=['analista_asignado', 'estado'], name='nomina_inci_analist_11c3e9_idx'),
        ),
        migrations.AddIndex(
            model_name='incidenciavariacionsalarial',
            index=models.Index(fields=['supervisor_revisor', 'estado'], name='nomina_inci_supervi_035d17_idx'),
        ),
        migrations.AddIndex(
            model_name='incidenciavariacionsalarial',
            index=models.Index(fields=['rut_empleado', 'cierre'], name='nomina_inci_rut_emp_898cbf_idx'),
        ),
        migrations.AddIndex(
            model_name='movimientoaltabaja',
            index=models.Index(fields=['cierre', 'rut'], name='nomina_movi_cierre__f2c8bc_idx'),
        ),
        migrations.AddIndex(
            model_name='movimientoausentismo',
            index=models.Index(fields=['cierre', 'rut'], name='nomina_movi_cierre__8dee6d_idx'),
        ),
        migrations.AddIndex(
            model_name='movimientovacaciones',
            index=models.Index(fields=['cierre', 'rut'], name='nomina_movi_cierre__cd2f3a_idx'),
        ),
        migrations.AddIndex(
            model_name='movimientovariacioncontrato',
            index=models.Index(fields=['cierre', 'rut'], name='nomina_movi_cierre__361fe8_idx'),
        ),
        migrations.AddIndex(
            model_name='movimientovariacionsueldo',
            index=models.Index(fields=['cierre', 'rut'], name='nomina_movi_cierre__672dd4_idx'),
        ),
        migrations.AddIndex(
            model_name='nominaconsolidada',
            index=models.Index(fields=['cierre', 'estado_empleado'], name='nomina_nomi_cierre__8f9772_idx'),
        ),
        migrations.AddIndex(
            model_name='nominaconsolidada',
            index=models.Index(fields=['rut_empleado'], name='nomina_nomi_rut_emp_3e3383_idx'),
        ),
        migrations.AddIndex(
            model_name='nominaconsolidada',
            index=models.Index(fields=['liquido_pagar'], name='nomina_nomi_liquido_7d4a82_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='nominaconsolidada',
            unique_together={('cierre', 'rut_empleado')},
        ),
        migrations.AddIndex(
            model_name='movimientopersonal',
            index=models.Index(fields=['nomina_consolidada', 'tipo_movimiento'], name='nomina_movi_nomina__a36559_idx'),
        ),
        migrations.AddIndex(
            model_name='movimientopersonal',
            index=models.Index(fields=['fecha_movimiento'], name='nomina_movi_fecha_m_8cd963_idx'),
        ),
        migrations.AddIndex(
            model_name='headervalorempleado',
            index=models.Index(fields=['nomina_consolidada', 'nombre_header'], name='nomina_head_nomina__b39135_idx'),
        ),
        migrations.AddIndex(
            model_name='headervalorempleado',
            index=models.Index(fields=['nombre_header'], name='nomina_head_nombre__4551a6_idx'),
        ),
        migrations.AddIndex(
            model_name='headervalorempleado',
            index=models.Index(fields=['valor_numerico'], name='nomina_head_valor_n_81719e_idx'),
        ),
        migrations.AddIndex(
            model_name='headervalorempleado',
            index=models.Index(fields=['es_numerico'], name='nomina_head_es_nume_22bb46_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='headervalorempleado',
            unique_together={('nomina_consolidada', 'nombre_header')},
        ),
        migrations.AddIndex(
            model_name='conceptoconsolidado',
            index=models.Index(fields=['nomina_consolidada', 'tipo_concepto'], name='nomina_conc_nomina__3bc30f_idx'),
        ),
        migrations.AddIndex(
            model_name='conceptoconsolidado',
            index=models.Index(fields=['nombre_concepto'], name='nomina_conc_nombre__3e51c1_idx'),
        ),
        migrations.AddIndex(
            model_name='conceptoconsolidado',
            index=models.Index(fields=['monto_total'], name='nomina_conc_monto_t_c5adf1_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='conceptoconsolidado',
            unique_together={('nomina_consolidada', 'nombre_concepto')},
        ),
        migrations.AlterUniqueTogether(
            name='registroconceptoempleado',
            unique_together={('empleado', 'nombre_concepto_original')},
        ),
        migrations.AlterUniqueTogether(
            name='registroconceptoempleadonovedades',
            unique_together={('empleado', 'nombre_concepto_original')},
        ),
        migrations.AddIndex(
            model_name='uploadlognomina',
            index=models.Index(fields=['cliente', 'tipo_upload'], name='nomina_uplo_cliente_80a255_idx'),
        ),
        migrations.AddIndex(
            model_name='uploadlognomina',
            index=models.Index(fields=['estado', 'fecha_subida'], name='nomina_uplo_estado_35590f_idx'),
        ),
        migrations.AddIndex(
            model_name='uploadlognomina',
            index=models.Index(fields=['tipo_upload', 'estado'], name='nomina_uplo_tipo_up_ac3588_idx'),
        ),
        migrations.AddIndex(
            model_name='uploadlognomina',
            index=models.Index(fields=['cierre', 'tipo_upload', 'iteracion'], name='nomina_uplo_cierre__fea5eb_idx'),
        ),
        migrations.AddIndex(
            model_name='uploadlognomina',
            index=models.Index(fields=['cierre', 'tipo_upload', 'es_iteracion_principal'], name='nomina_uplo_cierre__daec57_idx'),
        ),
        migrations.AddIndex(
            model_name='tarjetaactivitylognomina',
            index=models.Index(fields=['cierre', 'tarjeta'], name='nomina_tarj_cierre__dcbaec_idx'),
        ),
        migrations.AddIndex(
            model_name='tarjetaactivitylognomina',
            index=models.Index(fields=['usuario', 'timestamp'], name='nomina_tarj_usuario_36363d_idx'),
        ),
        migrations.AddIndex(
            model_name='tarjetaactivitylognomina',
            index=models.Index(fields=['tarjeta', 'accion'], name='nomina_tarj_tarjeta_befaec_idx'),
        ),
    ]
